---
title: サーバーアクションはどこに置く？
---

Next.js 14 以降は主にサーバーアクションを使うことになります。サーバーアクションファイルはどこにおくのが良いのでしょうか？

正解はありませんが、大きく分けると以下のパターンがあります。

- A パターン: ルート付近にまとめる
- B パターン: 使用箇所にまとめる

![](/images/file-tree-idea.png)

A パターンはすべてのアクションを`actions/`ディレクトリにまとめます。このパターンは管理がシンプルになりますが、特定のページやコンポーネントでしか使われないアクションも`actions/`ディレクトリにまとめることになるので、コンポーネントやページを削除する際にアクションの削除が忘れられ、不要なアクションが残ってしまうリスクがあります。

B パターンは必要な箇所にアクションファイルを設置します。たとえばユーザーを作成するアクションはユーザー登録画面（あるいはユーザーフォームコンポーネント）でしか使わない可能性が高いため、該当ページや該当コンポーネントのディレクトリにまとめます。これにより将来的にページやコンポーネントが不要になった時、紐づくアクションも忘れずに削除できます。また、ページやコンポーネントに関係するアクションが直感的に把握できるようになります。デメリットは、アクションを他の場所でも使いたくなった時に共通ディレクトリに移動する手間が発生したり、チーム開発において他のメンバーが別の箇所で重複するアクションを作ってしまうリスクがあります。

正解はないので自分に合ったパターンで OK です。著者個人的には UI 単位でディレクトリに素材やアクションをまとめるパターンを推奨しています。

![](/images/like-button-directory.png)

こうすることで、お気に入りボタンで使われる画像やアクションが明確になります。
